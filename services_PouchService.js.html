<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: services/PouchService.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: services/PouchService.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import PouchDB from 'pouchdb'
import find from 'pouchdb-find'
PouchDB.plugin(find)

/**
 * Provides basic database functionality using PouchDB.
 *
 * @class
 */
export class PouchService {
    /**
     * @param {string} dbName - The name of the database to create.
     *
     * @constructor
     */
    constructor (dbName) {
      this.db = new PouchDB(dbName)
      this.db._remote = false;
    }

    /**
     * Gets the element with the specified ID from the database.
     *
     * @param {string} id - The ID of the element to get.
     * @return {Promise&lt;Object>} A promise to the requested object.
     *
     * @function
     */
    async getOne (id) {
      return await this.db.get(id)
    }

    /**
     * Gets all elements from the database.
     *
     * @return {Promise&lt;Array&lt;Object>>} A promise to an array containing all objects in the database.
     *
     * @function
     */
    async getAll () {
      var response = await this.db.find({
        selector: {
          _id: {
            $regex: ''
          }
        }
      })

      return response.docs
    }

    /**
     * Adds an index to the database.
     *
     * @param {string} key - The database field to index.
     *
     * @function
     */
    async addIndex (key) {
      this.db.createIndex({
        index: { fields: [key] }
      })
    }

    /**
     * Gets all database elements that match the specified query.
     *
     * @param {string} query - A Mango query describing the object(s) to find.
     * @return {Promise&lt;Array&lt;Object>>} A promise to an array containing all objects matching the query.
     *
     * @function
     */
    async getByQuery (query) {
      var response = await this.db.find(query)
      return response.docs
    }

    /**
     * Adds the specified document to the database.
     *
     * @param {string} document - The document to add to the database.
     * @return {string} The GUID of the newly created document.
     *
     * @function
     */
    async create (document) {
      var response = await this.db.post(document)
      return response.id
    }

    /**
     * Updates the specified document in the database.
     *
     * @param {string} document - The document to update.
     *
     * @function
     */
    async update (document) {
      this.db.put(document)
    }

    /**
     * Removes the specified document from the database.
     *
     * @param {string} document - The document to remove from the database.
     *
     * @function
     */
    async delete (document) {
      this.db.remove(document)
    }
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="ActivityService.html">ActivityService</a></li><li><a href="AreaService.html">AreaService</a></li><li><a href="PouchService.html">PouchService</a></li><li><a href="ProjectService.html">ProjectService</a></li><li><a href="TagService.html">TagService</a></li></ul><h3>Global</h3><ul><li><a href="global.html#router">router</a></li><li><a href="global.html#routes">routes</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Mon Dec 21 2020 09:21:47 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
